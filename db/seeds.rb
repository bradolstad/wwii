#!/bin/env ruby
# encoding: utf-8

def find_out_what_table(id)
    @country_id = nil
    @operation_id = nil
    @unit_id = nil
    if country = Country.find_by_old_id(id)
        @country_id =country.id
    elsif operation = Operation.find_by_old_id(id)
        @operation_id = operation.id
    elsif unit = Unit.find_by_old_id(id)
        @unit_id = unit.id
    else
        return
    end
end


Country.destroy_all

Country.create([
    {:old_id=>855, :name=>"United States"},
    {:old_id=>854, :name=>"United Kingdom"},
    {:old_id=>856, :name=>"Canada"},
    {:old_id=>857, :name=>"Free France"},
    {:old_id=>858, :name=>"Poland"},
    {:old_id=>859, :name=>"Norway"},
    {:old_id=>860, :name=>"Australia"},
    {:old_id=>861, :name=>"New Zealand"},
    {:old_id=>862, :name=>"Netherlands"},
    {:old_id=>868, :name=>"Czechoslovakia"},
    {:old_id=>863, :name=>"Belgium"},
    {:old_id=>865, :name=>"Greece"},
    {:old_id=>867, :name=>"South Africa"},
    {:old_id=>866, :name=>"India"}
  ])

puts "Countries created: #{Country.count}"

Unit.destroy_all
Unit.create([
    {:old_id=>922, :name=>"N A V A L Operations"}, {:old_id=>383, :name=>"Western Taskforce"}, {:old_id=>384, :name=>"Eastern Taskforce"}, {:old_id=>1098, :name=>"SPECIAL LOCATIONS"}, {:old_id=>945, :name=>"Landing & dropping zone"}, {:old_id=>1097, :name=>"Special locations"}, {:old_id=>795, :name=>"A R T I L L E R Y "}, {:old_id=>796, :name=>"Army Groups Royal Artillery"}, {:old_id=>815, :name=>"- 5 AGRA"}, {:old_id=>660, :name=>"S P E C I A L   F O R C ES"}, {:old_id=>411, :name=>"1st Special Service Brigade (UK)"}, {:old_id=>419, :name=>"4th Special Service Brigade (UK)"}, {:old_id=>697, :name=>"- No. 41 (Royal Marine) Commando"}, {:old_id=>663, :name=>"- No. 47 (Royal Marine) Commando"}, {:old_id=>696, :name=>"Demi Brigade (French)"}, {:old_id=>722, :name=>"The Belgians S.A.S. Parachutists"}, {:old_id=>664, :name=>"11 Line of Communication Area"}, {:old_id=>764, :name=>"79th Armoured Division (UK)"}, {:old_id=>765, :name=>"- 30 Armoured Brigade"}, {:old_id=>785, :name=>"- - 1 Lothians and Border Horse Yeomanry"}, {:old_id=>820, :name=>"C A L V A L R Y "}, {:old_id=>849, :name=>"4th Cavalry Group, Mechanized"}, {:old_id=>850, :name=>"- 759th Tank Battalion (USA)"}, {:old_id=>821, :name=>"113th Cavalry Group"}, {:old_id=>822, :name=>"- 113th Cavalry Squadron"}, {:old_id=>823, :name=>"- 125th Cavalry Squadron"}, {:old_id=>1099, :name=>"117th Cavalry Reconnaissance Squadron (Mecz)"}, {:old_id=>804, :name=>"- "}, {:old_id=>560, :name=>"E N G I N E E R S "}, {:old_id=>829, :name=>"17th Armored Engineer Battalion (USA)"}, {:old_id=>840, :name=>"1104th Engineer Combat Group"}, {:old_id=>841, :name=>"1106th Engineer Combat Group"}, {:old_id=>842, :name=>"- 237th Engineer Combat Battalion"}, {:old_id=>843, :name=>"1142nd Engineers Combat Group"}, {:old_id=>844, :name=>"- 172nd Engineer Combat Battalion"}, {:old_id=>741, :name=>"150th Engineer Combat Battalion"}, {:old_id=>834, :name=>"234th Engineer Combat Battalion"}, {:old_id=>836, :name=>"246th Engineer Combat Battalion"}, {:old_id=>830, :name=>"324th Engineer Combat Battalion"}, {:old_id=>831, :name=>"326 Airborne Engineer Battalion"}, {:old_id=>739, :name=>"505th Engineer Light Ponton Company "}, {:old_id=>767, :name=>"A R M O (U) R E D "}, {:old_id=>550, :name=>"2nd Armored Division (USA)"}, {:old_id=>878, :name=>"- 99th Infantry Battalion (Separate) (USA)"}, {:old_id=>816, :name=>"- 17th Armored Engineer Battalion (USA)"}, {:old_id=>833, :name=>"- 234th Engineer Combat Battalion"}, {:old_id=>835, :name=>"- 246th Engineer Combat Battalion"}, {:old_id=>817, :name=>"- 41st Infantry Regiment (USA)"}, {:old_id=>818, :name=>"- 67th Armor Regiment (USA)"}, {:old_id=>832, :name=>"- 744th Light Tank Battalion"}, {:old_id=>828, :name=>"- 82nd Armored Reconnaissance Battalion (USA)"}, {:old_id=>839, :name=>"- 803rd Tank Destroyer Battalion"}, {:old_id=>580, :name=>"2nd Armored Division (France) "}, {:old_id=>552, :name=>"3rd Armored Division (USA) "}, {:old_id=>792, :name=>"31 Tank Brigade"}, {:old_id=>794, :name=>"- 7 Royal Tank Regiment"}, {:old_id=>554, :name=>"4th Armored Division (USA)"}, {:old_id=>417, :name=>"4th Armoured Brigade (UK)"}, {:old_id=>245, :name=>"- 2nd Battalion The King's Royal Rifle Corps"}, {:old_id=>798, :name=>"- 3 County of London Yeomanry"}, {:old_id=>799, :name=>"- 4th Royal Horse Artillery"}, {:old_id=>636, :name=>"- 44 Royal Tank Regiment"}, {:old_id=>791, :name=>"- Royal Scots Greys (2 Dragoons)"}, {:old_id=>556, :name=>"5th Armored Division (USA)"}, {:old_id=>559, :name=>"6th Armored Division (USA)"}, {:old_id=>561, :name=>"7th Armored Division (USA)"}, {:old_id=>742, :name=>"7th Armoured Division (UK)"}, {:old_id=>746, :name=>"- 131 Infantry Brigade "}, {:old_id=>747, :name=>"- - 1/5 The Queen's Royal Regiment"}, {:old_id=>755, :name=>"- - 1/6 The Queen's Royal Regiment"}, {:old_id=>754, :name=>"- - 1/7 The Queen's Royal Regiment"}, {:old_id=>744, :name=>"- 22 Armoured Brigade"}, {:old_id=>750, :name=>"- - 4 County of London Yeomanry"}, {:old_id=>753, :name=>"- - 1 Royal Tank Regiment "}, {:old_id=>756, :name=>"- - 1 The Rifle Brigade"}, {:old_id=>758, :name=>"- - 5 Royal Inniskilling Dragoon Guards"}, {:old_id=>745, :name=>"- - 5 Royal Tank Regiment"}, {:old_id=>748, :name=>"- 8 Hussars"}, {:old_id=>749, :name=>"- 11 Hussars"}, {:old_id=>752, :name=>"- 3rd Regiment Royal Horse Artillery "}, {:old_id=>751, :name=>"- 5th Regiment Royal Horse Artillery "}, {:old_id=>563, :name=>"8th Armored Division (USA)"}, {:old_id=>565, :name=>"9th Armored Division (USA)"}, {:old_id=>567, :name=>"10th Armored Division (USA) "}, {:old_id=>385, :name=>"11th Armored Division (USA)"}, {:old_id=>381, :name=>"- 41st Recon Squad"}, {:old_id=>229, :name=>"11th Armoured Division (UK)"}, {:old_id=>681, :name=>"- 15th/19th The King's Royal Hussars "}, {:old_id=>680, :name=>"- 29 Armoured Brigade"}, {:old_id=>242, :name=>"- - 3rd Royal Tank Regiment"}, {:old_id=>238, :name=>"- - 23rd Hussars"}, {:old_id=>786, :name=>"- 159 Infantry Brigade "}, {:old_id=>787, :name=>"- - 1 The Herefordshire Regiment"}, {:old_id=>788, :name=>"- - \t3 The Monmouthshire Regiment"}, {:old_id=>570, :name=>"12th Armored Division (USA) "}, {:old_id=>572, :name=>"13th Armored Division (USA) "}, {:old_id=>574, :name=>"14th Armored Division (USA) "}, {:old_id=>1100, :name=>" - 48th Tank Battalion (USA)"}, {:old_id=>576, :name=>"16th Armored Division (USA) "}, {:old_id=>578, :name=>"20th Armored Division (USA)"}, {:old_id=>759, :name=>"27th Armoured Brigade (UK)"}, {:old_id=>760, :name=>"- 13th/18th Royal Hussars"}, {:old_id=>761, :name=>"- East Riding of Yorkshire Yeomanry "}, {:old_id=>762, :name=>"- Staffordshire Yeomanry "}, {:old_id=>769, :name=>"A I R B O R N E "}, {:old_id=>594, :name=>"1st Airborne Division (UK)"}, {:old_id=>421, :name=>"6th Airborne Division (UK)"}, {:old_id=>881, :name=>"- 1st Parachute Brigade"}, {:old_id=>882, :name=>"- 2nd Parachute Brigade"}, {:old_id=>423, :name=>"- 3rd Parachute Brigade"}, {:old_id=>880, :name=>"- - 1st Canadian Parachute Battalion"}, {:old_id=>443, :name=>"5th Parachute Brigade"}, {:old_id=>410, :name=>"- 12th (Yorkshire) Parachute Battalion"}, {:old_id=>444, :name=>"- 13th (Lancashire) Parachute Battalion"}, {:old_id=>409, :name=>"- 7th (Light Infantry) Parachute Battalion"}, {:old_id=>440, :name=>"6th Airlanding Brigade"}, {:old_id=>407, :name=>"- Oxfordshire and Buckinghamshire Light Infantry "}, {:old_id=>441, :name=>"286th Field Park Company, Royal Engineers"}, {:old_id=>442, :name=>"53rd (Worcester Yeomanry) Airlanding Light Regiment)"}, {:old_id=>479, :name=>"13th Airborne Division (USA)"}, {:old_id=>481, :name=>"17th Airborne Division (USA) "}, {:old_id=>518, :name=>"82nd Airborne Division (USA) "}, {:old_id=>585, :name=>"- 504th Parachute Infantry Regiment"}, {:old_id=>586, :name=>"- 505th Parachute Infantry Regiment"}, {:old_id=>428, :name=>"101st Airborne Division"}, {:old_id=>446, :name=>"- 321 Glider Field Artillery Battalion"}, {:old_id=>447, :name=>"- 326 Airborne Engineer Battalion"}, {:old_id=>448, :name=>"- 327th Infantry Regiment (USA)"}, {:old_id=>449, :name=>"- 377 Parachute Field Artillery Battalion"}, {:old_id=>450, :name=>"- 401 Glider Infantry Regiment"}, {:old_id=>451, :name=>"- 501 Parachute Infantry Regiment"}, {:old_id=>452, :name=>"- 502 Parachute Infantry Regiment"}, {:old_id=>171, :name=>"- 506 Parachute Infantry Regiment Easy Company"}, {:old_id=>453, :name=>"- 65 Armored Field Artillery Battalion"}, {:old_id=>454, :name=>"- 81 Airborne Antiaircraft Artillery Battalion"}, {:old_id=>455, :name=>"- 907 Glider Field Artillery Battalion"}, {:old_id=>768, :name=>"D I V I S I O N S - USA"}, {:old_id=>466, :name=>"1st Infantry Division (USA) "}, {:old_id=>838, :name=>"- 1st Cavalry Reconnaissance Troop "}, {:old_id=>970, :name=>"- 16th Infantry Regiment (USA)"}, {:old_id=>837, :name=>"- 18th Infantry Regiment (USA)"}, {:old_id=>972, :name=>" - 26th Infantry Regiment (USA)"}, {:old_id=>464, :name=>"2nd Infantry Division (USA)"}, {:old_id=>468, :name=>"3rd Infantry Division (USA) "}, {:old_id=>228, :name=>"- 7th Infantry Regiment (USA)"}, {:old_id=>390, :name=>"4th Infantry Division (USA)"}, {:old_id=>391, :name=>"- 8th Infantry Regiment (USA)"}, {:old_id=>813, :name=>"- 12th Infantry Regiment (USA)"}, {:old_id=>814, :name=>"- 22nd Infantry Regiment (USA)"}, {:old_id=>473, :name=>"5th Infantry Division (USA) "}, {:old_id=>475, :name=>"8th Infantry Division (USA) "}, {:old_id=>477, :name=>"9th Infantry Division (USA)"}, {:old_id=>483, :name=>"26th Infantry Division (USA) "}, {:old_id=>485, :name=>"28th Infantry Division (USA)"}, {:old_id=>246, :name=>"29th Infantry Division"}, {:old_id=>695, :name=>"- 115th Infantry Regiment (USA)"}, {:old_id=>247, :name=>"- 116th Infantry Regiment (USA)"}, {:old_id=>851, :name=>"- - 2nd Ranger Battalion (USA)"}, {:old_id=>852, :name=>"- - 5th Ranger Battalion (USA)"}, {:old_id=>727, :name=>"- 175th Infantry Regiment"}, {:old_id=>487, :name=>"30th Infantry Division (USA) "}, {:old_id=>825, :name=>"- 117th Infantry Regiment (USA)"}, {:old_id=>819, :name=>"- 119th Infantry Regiment (USA)"}, {:old_id=>826, :name=>"- 120th Infantry Regiment (USA)"}, {:old_id=>827, :name=>"- 743rd Tank Battalion (USA)"}, {:old_id=>489, :name=>"35th Infantry Division (USA)"}, {:old_id=>491, :name=>"36th Infantry Division (USA) "}, {:old_id=>569, :name=>"- 442nd Infantry Regiment (USA) "}, {:old_id=>493, :name=>"42nd Infantry Division (USA) "}, {:old_id=>973, :name=>" - 222nd Infantry Regiment (USA)"}, {:old_id=>974, :name=>" - 232nd Infantry Regiment (USA)"}, {:old_id=>975, :name=>" - 242nd Infantry Regiment (USA)"}, {:old_id=>406, :name=>"44th Infantry Division (USA) "}, {:old_id=>496, :name=>"45th Infantry Division (USA)"}, {:old_id=>498, :name=>"63rd Infantry Division (USA)"}, {:old_id=>500, :name=>"65th Infantry Division (USA) "}, {:old_id=>502, :name=>"66th Infantry Division (USA) "}, {:old_id=>504, :name=>"69th Infantry Division (USA)"}, {:old_id=>506, :name=>"70th Infantry Division (USA) "}, {:old_id=>976, :name=>" - 274th Infantry Regiment (USA)"}, {:old_id=>508, :name=>"71th Infantry Division (USA) "}, {:old_id=>510, :name=>"75th Infantry Division (USA)"}, {:old_id=>512, :name=>"76th Infantry Division (USA) "}, {:old_id=>514, :name=>"78th Infantry Division (USA)"}, {:old_id=>516, :name=>"79th Infantry Division (USA)"}, {:old_id=>977, :name=>" - 313th Infantry Regiment (USA)"}, {:old_id=>978, :name=>" - 314th Infantry Regiment (USA)"}, {:old_id=>979, :name=>" - 315th Infantry Regiment (USA)"}, {:old_id=>456, :name=>"80th Infantry Division"}, {:old_id=>524, :name=>"83th Infantry Division (USA)"}, {:old_id=>521, :name=>"84th Infantry Division (USA) "}, {:old_id=>525, :name=>"86th Infantry Division (USA) "}, {:old_id=>527, :name=>"87th Infantry Division (USA) "}, {:old_id=>529, :name=>"89th Infantry Division (USA) "}, {:old_id=>531, :name=>"90th Infantry Division (USA)"}, {:old_id=>533, :name=>"94th Infantry Division (USA) "}, {:old_id=>535, :name=>"95th Infantry Division (USA)"}, {:old_id=>537, :name=>"97th Infantry Division (USA)"}, {:old_id=>539, :name=>"99th Infantry Division (USA) "}, {:old_id=>738, :name=>"- 324th Engineer Combat Battalion"}, {:old_id=>541, :name=>"100th Infantry Division (USA) "}, {:old_id=>986, :name=>" - 781st Tank Battalion"}, {:old_id=>543, :name=>"102nd Infantry Division (USA)"}, {:old_id=>546, :name=>"103rd Infantry Division (USA) "}, {:old_id=>983, :name=>" - 409th Infantry Regiment (USA) "}, {:old_id=>984, :name=>" - 410th Infantry Regiment (USA) "}, {:old_id=>985, :name=>" - 411th Infantry Regiment (USA) "}, {:old_id=>382, :name=>"104th Timberwolf Army Infantry Division "}, {:old_id=>522, :name=>"- "}, {:old_id=>548, :name=>"106th Infantry Division (USA) "}, {:old_id=>770, :name=>"D I V I S I O N S UK"}, {:old_id=>781, :name=>"Royal Pioneer Corps"}, {:old_id=>230, :name=>"3rd Infantry Division (UK)"}, {:old_id=>459, :name=>" - 8th Infantry Brigade (UK)"}, {:old_id=>460, :name=>" - - 1 The South Lancashire Regiment"}, {:old_id=>461, :name=>" - - 1 The Suffolk Regiment"}, {:old_id=>462, :name=>" - - 2 The East Yorkshire Regiment"}, {:old_id=>394, :name=>" - 92nd (Loyals) Light Anti-Aircraft Regiment, Royal Artillery"}, {:old_id=>634, :name=>" - 9th Infantry Brigade (UK)"}, {:old_id=>810, :name=>" - - 2 The Royal Ulster Rifles"}, {:old_id=>393, :name=>" - 185th Infantry Brigade (UK)"}, {:old_id=>414, :name=>" - - 1 The Royal Norfolk Regiment"}, {:old_id=>675, :name=>" - - 2 The Royal Warwickshire Regiment"}, {:old_id=>458, :name=>" - - 2 The King's Shropshire Light Infantry"}, {:old_id=>412, :name=>"- - * King's Shropshire Light Infantry 4th (Territorial) Battalion"}, {:old_id=>463, :name=>" - - * King's Shropshire Light Infantry 2nd Battalion"}, {:old_id=>234, :name=>"15th (Scottish) Infantry Division"}, {:old_id=>235, :name=>"- 227th Infantry Brigade (UK)"}, {:old_id=>657, :name=>"- - 10 The Highland Light Infantry"}, {:old_id=>801, :name=>"- - 2 The Gordon Highlanders"}, {:old_id=>955, :name=>"- - 2nd (Reconstituted) Battalion The Argyll and Sutherland Highlanders"}, {:old_id=>232, :name=>"- 44th (Lowland) Infantry Brigade (UK)"}, {:old_id=>667, :name=>"- - 6th King's Own Scottish Borderers"}, {:old_id=>809, :name=>"- - \t6 The Royal Scots Fusiliers"}, {:old_id=>233, :name=>"- 46th (Highland) Brigade (UK)"}, {:old_id=>802, :name=>"- - 2 The Glasgow Highlanders"}, {:old_id=>811, :name=>"- - 7 The Seaforth Highlanders"}, {:old_id=>812, :name=>"- - 9 The Cameronians"}, {:old_id=>236, :name=>"- Glasgow Highlanders"}, {:old_id=>239, :name=>"43rd (Wessex) Infantry Division (UK)"}, {:old_id=>243, :name=>"- 1st Battalion, The Worcestershire Regiment"}, {:old_id=>763, :name=>"- 5th Duke of Cornwall's Light Infantry "}, {:old_id=>244, :name=>"- 7th Battalion, The Somerset Light Infantry (Prince Albert's)"}, {:old_id=>416, :name=>"- Middlesex Regiment"}, {:old_id=>583, :name=>"* XXX Corps (UK) "}, {:old_id=>231, :name=>"49th (West Riding) Infantry Division"}, {:old_id=>587, :name=>"Guards Armoured Division (UK) "}, {:old_id=>956, :name=>" - 153rd Field Regiment RA"}, {:old_id=>584, :name=>"2nd Household Cavalry Regiment "}, {:old_id=>401, :name=>"50th (Northumbrian) Infantry Division"}, {:old_id=>420, :name=>"- 151st Infantry Brigade"}, {:old_id=>779, :name=>"- - 9 The Durham Light Infantry"}, {:old_id=>403, :name=>"- 231st Infantry Brigade"}, {:old_id=>780, :name=>"- - 2 The Devonshire Regiment"}, {:old_id=>404, :name=>"- 56th Infantry Brigade"}, {:old_id=>405, :name=>"- 69th Infantry Brigade"}, {:old_id=>679, :name=>"- - 5 The East Yorkshire Regiment"}, {:old_id=>661, :name=>"- 8th Armoured Brigade (UK) "}, {:old_id=>400, :name=>"-- 4th/7th Royal Dragoon Guards"}, {:old_id=>240, :name=>"51st (Highland) Infantry Division (UK)"}, {:old_id=>241, :name=>"- 152nd (Highland) Infantry Brigade "}, {:old_id=>735, :name=>"- - 2 The Seaforth Highlanders"}, {:old_id=>893, :name=>"- - 5 The Queens Own Cameron Highlanders"}, {:old_id=>733, :name=>"- 153nd (Highland) Infantry Brigade "}, {:old_id=>734, :name=>"- - 5 The Black Watch"}, {:old_id=>800, :name=>"- - \t1 The Gordon Highlanders"}, {:old_id=>653, :name=>"- 154nd (Highland) Infantry Brigade "}, {:old_id=>678, :name=>"52nd (Lowland) Infantry Division (UK)"}, {:old_id=>789, :name=>"- 155th Infantry Brigade "}, {:old_id=>790, :name=>"- - 7th/9th Bn. The Royal Scots (The Royal Regiment)"}, {:old_id=>665, :name=>"53rd (Welsh) Infantry Division (UK)"}, {:old_id=>671, :name=>"- 158th Infantry Brigade"}, {:old_id=>847, :name=>"- - 1st Battalion, East Lancashire Regiment "}, {:old_id=>848, :name=>"- - 1/5th Battalion, Welch Regiment "}, {:old_id=>807, :name=>"- - 4th Battalion, Royal Welch Fusiliers"}, {:old_id=>672, :name=>"- 160th Infantry Brigade"}, {:old_id=>846, :name=>"- - 2nd Battalion, Monmouthshire Regiment"}, {:old_id=>845, :name=>"- - 4th Battalion, Welch Regiment "}, {:old_id=>673, :name=>"- 71st Infantry Brigade (UK)"}, {:old_id=>674, :name=>"- - 1 Oxford and Buckinghamshire Light Infantry"}, {:old_id=>808, :name=>"- - 1 Highland Light Infantry"}, {:old_id=>668, :name=>"59th (Staffordshire) Infantry Division (UK)"}, {:old_id=>670, :name=>"- 7th Battalion, The Royal Northumberland Fusiliers"}, {:old_id=>771, :name=>"C A N A D I A  N"}, {:old_id=>592, :name=>"1st Canadian Corps"}, {:old_id=>591, :name=>"1st Canadian Infantry Division "}, {:old_id=>698, :name=>"- 1st Canadian Infantry Brigade"}, {:old_id=>702, :name=>"- - 1st Canadian Infantry Brigade Ground Defence Platoon (Lorne Scots)"}, {:old_id=>703, :name=>"- - 48th Highlanders of Canada"}, {:old_id=>704, :name=>"- - The Hastings and Prince Edward Regiment"}, {:old_id=>705, :name=>"- - The Royal Canadian Regiment"}, {:old_id=>699, :name=>"- 2nd Canadian Infantry Brigade"}, {:old_id=>706, :name=>"- - 2nd Canadian Infantry Brigade Ground Defence Platoon (Lorne Scots)"}, {:old_id=>651, :name=>"- - Princess Patricia's Canadian Light Infantry "}, {:old_id=>707, :name=>"- - The Loyal Edmonton Regiment"}, {:old_id=>708, :name=>"- - The Seaforth Highlanders of Canada"}, {:old_id=>700, :name=>"- 3rd Canadian Infantry Brigade"}, {:old_id=>709, :name=>"- - 3rd Canadian Infantry Brigade Ground Defence Platoon (Lorne Scots)"}, {:old_id=>710, :name=>"- - Royal 22e Régiment"}, {:old_id=>711, :name=>"- - The Carleton and York Regiment"}, {:old_id=>712, :name=>"- - The West Nova Scotia Regiment"}, {:old_id=>728, :name=>"- 2nd Canadian Armoured Brigade"}, {:old_id=>729, :name=>"- - The Fort Garry Horse "}, {:old_id=>731, :name=>"- Royal Canadian Dragoons"}, {:old_id=>676, :name=>"4th Canadian (Armoured) Division"}, {:old_id=>683, :name=>"- 10th Canadian Infantry Brigade"}, {:old_id=>677, :name=>"- - The Algonquin Regiment "}, {:old_id=>237, :name=>"- - 9th Battalion The Argyll and Sutherland Highlanders (Princess Louise's)"}, {:old_id=>689, :name=>"- - The Lincoln and Welland Regiment"}, {:old_id=>684, :name=>"- 4th Canadian Armoured Brigade "}, {:old_id=>685, :name=>"- - 21st Armoured Regiment (The Governor General's Foot Guards)"}, {:old_id=>686, :name=>"- - 22nd Armoured Regiment (The Canadian Grenadier Guards)"}, {:old_id=>687, :name=>"- - 28th Armoured Regiment (The British Columbia Regiment)"}, {:old_id=>688, :name=>"- - The Lake Superior Regiment (Motor)"}, {:old_id=>736, :name=>"- 29th Canadian Armoured Reconnaissance Regiment (The South Alberta Regiment) "}, {:old_id=>737, :name=>"- The New Brunswick Rangers"}, {:old_id=>632, :name=>"5th Canadian (Armoured) Division "}, {:old_id=>691, :name=>"- 5th Canadian Armoured Brigade"}, {:old_id=>690, :name=>"- 11th Canadian Infantry Brigade "}, {:old_id=>645, :name=>"- - Perth Regiment"}, {:old_id=>721, :name=>"- - The Cape Breton Highlanders"}, {:old_id=>637, :name=>"2nd Canadian Corps"}, {:old_id=>730, :name=>"2nd Canadian Infantry Division"}, {:old_id=>682, :name=>"12th Manitoba Dragoons "}, {:old_id=>713, :name=>"7th Reconnaissance Regiment (Duke of York's Royal Canadian Hussars) "}, {:old_id=>638, :name=>"2nd Canadian Infantry Division"}, {:old_id=>646, :name=>"- The Royal Hamilton Light Infantry (Wentworth Regiment)"}, {:old_id=>715, :name=>"- 8th Reconnaissance Regiment (14th Canadian Hussars) "}, {:old_id=>716, :name=>"- The Essex Scottish Regiment"}, {:old_id=>714, :name=>"- 4th Infantry Brigade (Canada)"}, {:old_id=>639, :name=>"- 5th Infantry Brigade (Canada)"}, {:old_id=>640, :name=>"- Le Régiment de Maisonneuve"}, {:old_id=>650, :name=>"- The South Saskatchewan Regiment"}, {:old_id=>718, :name=>"- The Toronto Scottish Regiment (Queen Elizabeth The Queen Mother's Own) "}, {:old_id=>641, :name=>"3rd Canadian Infantry Division"}, {:old_id=>655, :name=>"- 7 Canadian Infantry Brigade "}, {:old_id=>656, :name=>"- - 1 The Regina Rifle Regiment"}, {:old_id=>720, :name=>"- - 1 The Royal Winnipeg Rifles"}, {:old_id=>732, :name=>"- - 1 The Canadian Scottish Regiment"}, {:old_id=>643, :name=>"- 8 Canadian Infantry Brigade "}, {:old_id=>644, :name=>"- - 1 The North Shore (New Brunswick) Regiment"}, {:old_id=>652, :name=>"- - Régiment de la Chaudière "}, {:old_id=>654, :name=>"- - 1 The Queens Own Rifles of Canada"}, {:old_id=>647, :name=>"- 9 Canadian Infantry Brigade "}, {:old_id=>6, :name=>"- - 1st Battalion, The North Nova Scotia Highlanders"}, {:old_id=>648, :name=>"- - 1 The Highland Light Infantry of Canada"}, {:old_id=>649, :name=>"- - The Stormont: Dundas and Glengarry Highlanders"}, {:old_id=>725, :name=>"D U T C H "}, {:old_id=>5, :name=>"Princess Irene Brigade"}, {:old_id=>717, :name=>"Regiment Stoottroepen Prins Bernhard"}, {:old_id=>1101, :name=>"Dutch National Battalion"}, {:old_id=>803, :name=>"N O R W A Y  "}, {:old_id=>806, :name=>"No. 5 Norwegian Troops"}, {:old_id=>726, :name=>"P O L I S H"}, {:old_id=>397, :name=>"1st Polish Armoured Division"}, {:old_id=>590, :name=>"1st Independent Parachute Brigade (Poland) "}, {:old_id=>772, :name=>"B EL G I A N "}, {:old_id=>724, :name=>"1st Belgian Infantry Brigade (Piron)"}, {:old_id=>982, :name=>" -"}, {:old_id=>981, :name=>"F R E N C H"}, {:old_id=>980, :name=>"1st Army (France)"}
    ])

puts "Units created: #{Unit.count}"

Operation.destroy_all

Operation.create([
    {:old_id=>873, :name=>"C H O O S E"}, {:old_id=>597, :name=>"Accumulator June 12-13"}, {:old_id=>719, :name=>"Amherst April 8-9"}, {:old_id=>598, :name=>"Archway March - May"}, {:old_id=>599, :name=>"Astonia September 10-12"}, {:old_id=>600, :name=>"Atlantic July 18–20"}, {:old_id=>601, :name=>"Axehead August"}, {:old_id=>602, :name=>"Berlin (Arnhem) Sept 25-26"}, {:old_id=>603, :name=>"Blackcock Jan 14-26"}, {:old_id=>604, :name=>"Blockbuster late Feb - early March"}, {:old_id=>605, :name=>"Bluecoat July 30 – Aug 7"}, {:old_id=>606, :name=>"Charnwood July 8-9"}, {:old_id=>607, :name=>"Clipper November 18"}, {:old_id=>388, :name=>"Cobra July 25-31"}, {:old_id=>608, :name=>"Constellation Sept 30 - Oct 18 "}, {:old_id=>408, :name=>"Deadstick June 6th"}, {:old_id=>609, :name=>"Defoe July 9 - Aug 23"}, {:old_id=>610, :name=>"Dingson June 5-18"}, {:old_id=>611, :name=>"Dove Aug 15th"}, {:old_id=>612, :name=>"Dragoon Aug 15th"}, {:old_id=>387, :name=>"Epsom June 26-30"}, {:old_id=>613, :name=>"Fusilade Sept 1th"}, {:old_id=>614, :name=>"Goodwood July 18-20"}, {:old_id=>615, :name=>"Grenade Feb 23"}, {:old_id=>616, :name=>"Houndsmith June 6"}, {:old_id=>617, :name=>"Infatuate Nov 1-8"}, {:old_id=>618, :name=>"Jupiter July 10"}, {:old_id=>619, :name=>"Lost June 23 -July 18"}, {:old_id=>620, :name=>"Loyton Aug 12 - Oct 9"}, {:old_id=>621, :name=>"Manna April 29- May 8"}, {:old_id=>389, :name=>"Market Garden Sept 17-21"}, {:old_id=>622, :name=>"Martlet 25 June - 1 July"}, {:old_id=>386, :name=>"Neptune June 6-30"}, {:old_id=>623, :name=>"Pegasus Oct 22-23"}, {:old_id=>624, :name=>"Plunder March 23"}, {:old_id=>625, :name=>"Queen Nov 16th"}, {:old_id=>757, :name=>"Spring July 25–27"}, {:old_id=>626, :name=>"Switchback Oct 6-12"}, {:old_id=>627, :name=>"Tonga June 6-7"}, {:old_id=>398, :name=>"Totalize August 7-10"}, {:old_id=>399, :name=>"Tractable August 14-21"}, {:old_id=>628, :name=>"Varsity March 24"}, {:old_id=>629, :name=>"Veritable Feb 8- March 1"}, {:old_id=>630, :name=>"Vitality Oc 24"}, {:old_id=>631, :name=>"Windsor July 4-5"}
    ])

puts "Operations created: #{Operation.count}"

Event.destroy_all
EventAttribute.destroy_all

#load in the events from a json file
raw_events = JSON.load(File.open( 'parsed_data.json', "r" ))

raw_events.each do |row|
    find_out_what_table(row["old_id"])
    event = Event.find_by_unique_id(row["unique_id"])
    #puts "before 1st if: #{event.inspect}"
    if event.present?
        # if it exists check for an attributes record
        eventattribute = EventAttribute.find_by_event_id(event.id)
        #puts "after first if: #{eventattribute.inspect}"
        if eventattribute.present?
            #if an attribute record exists, update it
            eventattribute.country_id = @country_id unless @country_id==nil
            eventattribute.operation_id = @operation_id unless @operation_id==nil
            eventattribute.unit_id = @unit_id unless @unit_id==nil
            eventattribute.save
        else #no eventattribute row yet
            EventAttribute.create([{event_id:event.id,country_id:@country_id,operation_id:@operation_id,unit_id:@unit_id}])
        end
    else #no event found
        new_event = Event.new(
            {:unique_id => row["unique_id"] , :name => row["name"], :lat => row["lat"], :lng => row["lng"]}
            )
        new_event.save
        #puts "new_event: #{new_event.inspect}"
        EventAttribute.create([
            {event_id:new_event.id,country_id:@country_id,operation_id:@operation_id,unit_id:@unit_id}
            ])
    end #end for first if statement

end # end of main loop through rows

puts "Events created: #{Event.count}"
puts "Event Attributes created: #{EventAttribute.count}"
